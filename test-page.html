<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TodoList Extension æ¸¬è©¦é é¢</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .selectable-text {
            background: #e3f2fd;
            padding: 15px;
            border-left: 4px solid #2196f3;
            margin: 10px 0;
            border-radius: 4px;
            cursor: text;
            user-select: text;
        }
        .highlight {
            background: #fff3cd;
            padding: 2px 4px;
            border-radius: 3px;
        }
        .test-button {
            background: #409EFF;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        .test-button:hover {
            background: #337ab7;
        }
        .status {
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .status.success { background: #d4edda; color: #155724; }
        .status.error { background: #f8d7da; color: #721c24; }
        .status.info { background: #d1ecf1; color: #0c5460; }
    </style>
</head>
<body>
    <h1>TodoList Chrome Extension æ¸¬è©¦é é¢</h1>

    <div class="test-section">
        <h2>ğŸ§ª æ“´å±•åŠŸèƒ½æ¸¬è©¦</h2>
        <p>é€™å€‹é é¢ç”¨ä¾†æ¸¬è©¦ TodoList Chrome Extension çš„æ–‡å­—é¸å–åŠŸèƒ½ã€‚</p>

        <div class="status info">
            <strong>æ¸¬è©¦æ­¥é©Ÿï¼š</strong>
            <ol>
                <li>ç¢ºä¿å·²åœ¨Chromeä¸­è¼‰å…¥æ“´å±•ç¨‹åºï¼ˆä½¿ç”¨ <code>dist</code> è³‡æ–™å¤¾ï¼‰</li>
                <li>åœ¨ä¸‹æ–¹çš„è—è‰²å€å¡Šä¸­é¸å–ä»»æ„æ–‡å­—</li>
                <li>è§€å¯Ÿæ˜¯å¦å‡ºç¾é€šçŸ¥</li>
                <li>é»æ“Šæ“´å±•åœ–æ¨™æª¢æŸ¥å¾…è¾¦æ¸…å–®</li>
            </ol>
        </div>
    </div>

    <div class="test-section">
        <h2>ğŸ“ å¯é¸å–çš„æ¸¬è©¦æ–‡å­—</h2>

        <div class="selectable-text">
            <strong>æ¸¬è©¦æ–‡å­— 1ï¼š</strong>è²·ç‰›å¥¶å’ŒéºµåŒ…
        </div>

        <div class="selectable-text">
            <strong>æ¸¬è©¦æ–‡å­— 2ï¼š</strong>æº–å‚™æ˜å¤©çš„æœƒè­°è³‡æ–™
        </div>

        <div class="selectable-text">
            <strong>æ¸¬è©¦æ–‡å­— 3ï¼š</strong>é€™æ˜¯ä¸€æ®µè¼ƒé•·çš„æ¸¬è©¦æ–‡å­—ï¼Œç”¨ä¾†æ¸¬è©¦æ“´å±•æ˜¯å¦èƒ½æ­£ç¢ºè™•ç†è¼ƒé•·çš„æ–‡å­—å…§å®¹ä¸¦æ­£ç¢ºé¡¯ç¤ºåœ¨å¾…è¾¦æ¸…å–®ä¸­ã€‚
        </div>

        <div class="selectable-text">
            <strong>æ¸¬è©¦æ–‡å­— 4ï¼š</strong>æ‰“é›»è©±çµ¦å®¢æˆ¶è¨è«–å°ˆæ¡ˆé€²åº¦
        </div>

        <p>è«‹å˜—è©¦é¸å–ä¸Šé¢ä»»ä¸€æ®µæ–‡å­—ï¼Œæ‡‰è©²æœƒçœ‹åˆ°ï¼š</p>
        <ul>
            <li>ğŸ”µ è—è‰²é€šçŸ¥ï¼šã€Œæ­£åœ¨æ·»åŠ åˆ°å¾…è¾¦æ¸…å–®...ã€</li>
            <li>âœ… ç¶ è‰²é€šçŸ¥ï¼šã€Œå·²æ·»åŠ åˆ°å¾…è¾¦æ¸…å–®: [æ–‡å­—å…§å®¹]ã€</li>
            <li>âŒ ç´…è‰²é€šçŸ¥ï¼šå¦‚æœå‡ºç¾éŒ¯èª¤</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>ğŸ”§ è¨ºæ–·å·¥å…·</h2>
        <button class="test-button" onclick="checkExtensionStatus()">æª¢æŸ¥æ“´å±•ç‹€æ…‹</button>
        <button class="test-button" onclick="testMessage()">æ¸¬è©¦è¨Šæ¯ç™¼é€</button>
        <button class="test-button" onclick="showConsole()">æŸ¥çœ‹æ§åˆ¶å°æ—¥èªŒ</button>

        <div id="diagnostic-results"></div>
    </div>

    <div class="test-section">
        <h2>ğŸ’¡ æ•…éšœæ’é™¤</h2>
        <h3>å¦‚æœæ²’æœ‰çœ‹åˆ°é€šçŸ¥ï¼š</h3>
        <ul>
            <li>æŒ‰ F12 æ‰“é–‹é–‹ç™¼è€…å·¥å…·ï¼ŒæŸ¥çœ‹ Console æ¨™ç±¤ä¸­çš„éŒ¯èª¤è¨Šæ¯</li>
            <li>ç¢ºèªæ“´å±•å·²æ­£ç¢ºè¼‰å…¥ï¼šé€²å…¥ <code>chrome://extensions/</code> æª¢æŸ¥</li>
            <li>ç¢ºèªæ¬Šé™ï¼šæ“´å±•æ‡‰è©²æœ‰ "activeTab", "scripting", "storage", "tabs" æ¬Šé™</li>
            <li>é‡æ–°è¼‰å…¥æ“´å±•ï¼šåœ¨æ“´å±•ç®¡ç†é é¢é»æ“Šé‡æ–°è¼‰å…¥æŒ‰éˆ•</li>
            <li>é‡æ–°è¼‰å…¥æ­¤é é¢ä¸¦å†æ¬¡å˜—è©¦</li>
        </ul>

        <h3>æ‡‰è©²çœ‹åˆ°çš„æ§åˆ¶å°æ—¥èªŒï¼š</h3>
        <pre style="background: #f8f9fa; padding: 10px; border-radius: 4px; font-size: 12px;">
TodoList Extension: Content script loaded on: [URL]
TodoList Extension: Chrome runtime available
TodoList Extension: Content script initialization complete
TodoList Extension: Selected text: [é¸å–çš„æ–‡å­—]
TodoList Extension: Message sent successfully
        </pre>
    </div>

    <script>
        function checkExtensionStatus() {
            const results = document.getElementById('diagnostic-results');
            let html = '<h3>è¨ºæ–·çµæœï¼š</h3>';

            // æª¢æŸ¥åŸºæœ¬ç’°å¢ƒ
            html += `<p><strong>Chromeç‰ˆæœ¬ï¼š</strong> ${navigator.userAgent}</p>`;
            html += `<p><strong>é é¢URLï¼š</strong> ${window.location.href}</p>`;

            // æª¢æŸ¥Chrome APIs
            if (window.chrome) {
                html += '<p class="status success">âœ… Chrome API å¯ç”¨</p>';
                if (chrome.runtime) {
                    html += '<p class="status success">âœ… Chrome Runtime API å¯ç”¨</p>';
                } else {
                    html += '<p class="status error">âŒ Chrome Runtime API ä¸å¯ç”¨</p>';
                }
            } else {
                html += '<p class="status error">âŒ Chrome API ä¸å¯ç”¨</p>';
            }

            results.innerHTML = html;
        }

        function testMessage() {
            if (chrome && chrome.runtime) {
                chrome.runtime.sendMessage({ action: 'addTodo', text: 'æ¸¬è©¦è¨Šæ¯ï¼šæ‰‹å‹•ç™¼é€çš„å¾…è¾¦äº‹é …' }, (response) => {
                    const results = document.getElementById('diagnostic-results');
                    if (chrome.runtime.lastError) {
                        results.innerHTML = `<p class="status error">âŒ è¨Šæ¯ç™¼é€å¤±æ•—ï¼š${chrome.runtime.lastError.message}</p>`;
                    } else {
                        results.innerHTML = `<p class="status success">âœ… è¨Šæ¯ç™¼é€æˆåŠŸï¼š${JSON.stringify(response)}</p>`;
                    }
                });
            } else {
                const results = document.getElementById('diagnostic-results');
                results.innerHTML = '<p class="status error">âŒ ç„¡æ³•ç™¼é€è¨Šæ¯ï¼šChrome API ä¸å¯ç”¨</p>';
            }
        }

        function showConsole() {
            alert('è«‹æŒ‰ F12 æ‰“é–‹é–‹ç™¼è€…å·¥å…·ï¼Œç„¶å¾ŒæŸ¥çœ‹ Console æ¨™ç±¤ä»¥æŸ¥çœ‹è©³ç´°çš„æ—¥èªŒè¨Šæ¯ã€‚');
        }

        // è‡ªå‹•é‹è¡Œåˆå§‹æª¢æŸ¥
        setTimeout(checkExtensionStatus, 1000);
    </script>
</body>
</html>
